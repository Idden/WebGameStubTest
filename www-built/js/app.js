var requirejs,require,define;(function(a){function g(a,b){if(a&&a.charAt(0)==="."&&b){b=b.split("/"),b=b.slice(0,b.length-1),a=b.concat(a.split("/"));var c,d;for(c=0;d=a[c];c++)if(d===".")a.splice(c,1),c-=1;else if(d===".."){if(c===1&&(a[2]===".."||a[0]===".."))break;c>0&&(a.splice(c-1,2),c-=2)}a=a.join("/")}return a}function h(b,c){return function(){return f.apply(a,d.call(arguments,0).concat([b,c]))}}function i(a){return function(b){return g(b,a)}}function j(a){return function(c){b[a]=c}}function k(d){if(c.hasOwnProperty(d)){var f=c[d];delete c[d],e.apply(a,f)}return b[d]}function l(a,b){var c,d,e=a.indexOf("!");return e!==-1?(c=g(a.slice(0,e),b),a=a.slice(e+1),d=k(c),d&&d.normalize?a=d.normalize(a,i(b)):a=g(a,b)):a=g(a,b),{f:c?c+"!"+a:a,n:a,p:d}}var b={},c={},d=[].slice,e,f;if(typeof define=="function")return;e=function(d,e,f,g){var i=[],m,n,o,p,q,r;g||(g=d);if(typeof f=="function"){!e.length&&f.length&&(e=["require","exports","module"]);for(p=0;p<e.length;p++){r=l(e[p],g),o=r.f;if(o==="require")i[p]=h(d);else if(o==="exports")i[p]=b[d]={},m=!0;else if(o==="module")n=i[p]={id:d,uri:"",exports:b[d]};else if(b.hasOwnProperty(o)||c.hasOwnProperty(o))i[p]=k(o);else{if(!r.p)throw d+" missing "+o;r.p.load(r.n,h(g,!0),j(o),{}),i[p]=b[o]}}q=f.apply(b[d],i),d&&(n&&n.exports!==a?b[d]=n.exports:m||(b[d]=q))}else d&&(b[d]=f)},requirejs=f=function(b,c,d,g){return typeof b=="string"?k(l(b,c).f):(b.splice||(c.splice?(b=c,c=arguments[2]):b=[]),g?e(a,b,c,d):setTimeout(function(){e(a,b,c,d)},15),f)},f.config=function(){return f},require||(require=f),define=function(a,b,d){b.splice||(d=b,b=[]),define.unordered?c[a]=[a,b,d]:e(a,b,d)},define.amd={jQuery:!0}})(),define("almond",function(){}),requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");canvas.width=1024,canvas.height=768,document.body.appendChild(canvas);var bgReady=!1,bgImage=new Image;bgImage.onload=function(){bgReady=!0},bgImage.src="img/background.png";var borderReady=!1,borderImage=new Image;borderImage.onload=function(){borderReady=!0},borderImage.src="img/border.png";var ball1Ready=!1,ball1Image=new Image;ball1Image.onload=function(){ball1Ready=!0},ball1Image.src="img/ball.png";var holeReady=!1,holeImage=new Image;holeImage.onload=function(){holeReady=!0},holeImage.src="img/hole.png";var monsterReady=!1,monsterImage=new Image;monsterImage.onload=function(){monsterReady=!0},monsterImage.src="img/ball2.png";var hero={speed:256},monster={speed:128},hole={},score=0,keysDown={};addEventListener("keydown",function(a){keysDown[a.keyCode]=!0},!1),addEventListener("keyup",function(a){delete keysDown[a.keyCode]},!1);var reset=function(){hero.x=canvas.width/2,hero.y=canvas.height/2,monster.x=32+Math.random()*(canvas.width-64),monster.y=32+Math.random()*(canvas.height-64),hole.x=32+Math.random()*(canvas.width-64),hole.y=32+Math.random()*(canvas.height-64)},Point={x:0,y:0},monsterDestination,generateRandomDestination=function(){return p=Point,p.x=Math.random()*canvas.width,p.y=Math.random()*canvas.height,p},update=function(a){38 in keysDown&&(hero.y=Math.max(hero.y-hero.speed*a,0)),40 in keysDown&&(hero.y=Math.min(hero.y+hero.speed*a,canvas.height-64)),37 in keysDown&&(hero.x=Math.max(hero.x-hero.speed*a,0)),39 in keysDown&&(hero.x=Math.min(hero.x+hero.speed*a,canvas.width-64));if(monsterDestination==null||monster.x==monsterDestination.x&&monster.y==monsterDestination.y)monsterDestination=generateRandomDestination();monster.x>monsterDestination.x?monster.x=Math.max(monster.x-monster.speed*a,monsterDestination.x):monster.x=Math.min(monster.x+monster.speed*a,monsterDestination.x),monster.y>monsterDestination.y?monster.y=Math.max(monster.y-monster.speed*a,monsterDestination.y):monster.y=Math.min(monster.y+monster.speed*a,monsterDestination.y),hero.x<=monster.x+32&&monster.x<=hero.x+32&&hero.y<=monster.y+32&&monster.y<=hero.y+32?(--score,reset()):hero.x<=hole.x+32&&hole.x<=hero.x+32&&hero.y<=hole.y+32&&hole.y<=hero.y+32&&(++score,reset())},render=function(){bgReady&&ctx.drawImage(bgImage,0,0),borderReady&&ctx.drawImage(borderImage,0,0),holeReady&&ctx.drawImage(holeImage,hole.x,hole.y),monsterReady&&ctx.drawImage(monsterImage,monster.x,monster.y),ball1Ready&&ctx.drawImage(ball1Image,hero.x,hero.y),ctx.fillStyle="rgb(250, 250, 250)",ctx.font="24px Helvetica",ctx.textAlign="left",ctx.textBaseline="top",ctx.fillText("Score: "+score,32,32)},main=function(){var a=Date.now(),b=a-then;update(b/1e3),render(),then=a,requestAnimationFrame(main)};reset();var then=Date.now();main(),define("app",function(){})